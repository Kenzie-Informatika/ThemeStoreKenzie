<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML to APK Converter - Kenzie Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .bg-animate {
            background: linear-gradient(-45deg, #0f172a, #1e1b4b, #312e81, #1e3a8a);
            background-size: 400% 400%;
            animation: gradient 10s ease infinite;
        }
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .progress-fill { transition: width 0.5s ease; }
        
        #drop-area.drag-active {
            border-color: #60a5fa;
            background: rgba(59, 130, 246, 0.1);
            transform: scale(1.02);
        }
    </style>
</head>
<body class="bg-animate min-h-screen flex items-center justify-center p-4 text-white font-sans">

    <div class="glass w-full max-w-lg rounded-[2rem] p-8 shadow-2xl">
        <div class="text-center mb-8">
            <div class="inline-block p-4 bg-blue-500/20 rounded-2xl mb-4">
                <i class="fab fa-android text-4xl text-green-400"></i>
            </div>
            <h1 class="text-3xl font-extrabold tracking-tight">APK Builder <span class="text-blue-400">Pro</span></h1>
            <p class="text-gray-400 text-sm mt-2">Convert your HTML to a real Android App</p>
        </div>

        <div id="upload-section" class="space-y-5">
            <div class="space-y-2">
                <label class="text-xs font-bold text-gray-400 uppercase tracking-widest ml-1">App Identity</label>
                <input type="text" id="appName" placeholder="Nama Aplikasi (e.g: KenzieApp)" 
                    class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 focus:outline-none focus:border-blue-500 transition-all">
            </div>

            <div id="drop-area" class="border-2 border-dashed border-white/20 rounded-2xl p-8 text-center hover:border-blue-400 transition-all cursor-pointer bg-white/5">
                <input type="file" id="fileInput" class="hidden" accept=".html">
                <i class="fas fa-file-code text-3xl mb-3 text-blue-400"></i>
                <p id="file-status" class="text-sm text-gray-300">Klik atau seret file <b>index.html</b> ke sini</p>
            </div>

            <button onclick="startBuild()" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 rounded-2xl shadow-lg shadow-blue-600/30 transition-all active:scale-95">
                GENERATE APK
            </button>
        </div>

        <div id="progress-section" class="hidden space-y-6">
            <div class="text-center">
                <div id="status-icon" class="text-3xl mb-2">ðŸš€</div>
                <h2 id="status-text" class="text-lg font-bold">Initializing Build...</h2>
                <p id="percent-text" class="text-3xl font-black text-blue-400">0%</p>
            </div>

            <div class="w-full bg-white/10 rounded-full h-3 overflow-hidden">
                <div id="progress-bar" class="progress-fill bg-gradient-to-r from-blue-500 to-green-400 h-full w-0"></div>
            </div>

            <div id="console" class="bg-black/40 rounded-xl p-4 h-32 overflow-y-auto font-mono text-[10px] text-blue-300 border border-white/5">
                <p>> System ready for compilation...</p>
            </div>
        </div>

        <div id="result-section" class="hidden text-center space-y-4">
            <div class="p-6 bg-green-500/10 border border-green-500/20 rounded-2xl">
                <i class="fas fa-check-circle text-5xl text-green-400 mb-3"></i>
                <h3 class="text-xl font-bold">Build Berhasil!</h3>
                <p class="text-gray-400 text-sm">File APK kamu sudah siap diunduh.</p>
            </div>
            <a id="download-link" href="#" download class="block w-full bg-green-500 hover:bg-green-400 text-black font-bold py-4 rounded-2xl transition-all">
                DOWNLOAD APK SEKARANG
            </a>
            <button onclick="location.reload()" class="text-xs text-gray-500 hover:text-white underline">Buat lagi</button>
        </div>
    </div>

    <script>
        const fileInput = document.getElementById('fileInput');
        const dropArea = document.getElementById('drop-area');
        const fileStatus = document.getElementById('file-status');
        const consoleBox = document.getElementById('console');
        const downloadLink = document.getElementById('download-link');

        dropArea.addEventListener('click', () => fileInput.click());

        fileInput.addEventListener('change', function() {
            if (this.files && this.files[0]) handleFileSelection(this.files[0]);
        });

        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(name => {
            dropArea.addEventListener(name, e => { e.preventDefault(); e.stopPropagation(); });
        });

        ['dragenter', 'dragover'].forEach(name => {
            dropArea.addEventListener(name, () => dropArea.classList.add('drag-active'));
        });

        ['dragleave', 'drop'].forEach(name => {
            dropArea.addEventListener(name, () => dropArea.classList.remove('drag-active'));
        });

        dropArea.addEventListener('drop', (e) => {
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                fileInput.files = files;
                handleFileSelection(files[0]);
            }
        });

        function handleFileSelection(file) {
            if (file.name.endsWith('.html')) {
                fileStatus.innerHTML = `File terpilih: <b class="text-blue-400">${file.name}</b>`;
                addLog("File " + file.name + " berhasil dimuat.");
            } else {
                alert("Kenzie, pakai file .html ya!");
                fileInput.value = "";
                fileStatus.innerHTML = "Klik untuk upload <b>index.html</b>";
            }
        }

        function addLog(msg) {
            const p = document.createElement('p');
            p.innerHTML = `<span class="text-gray-500">>></span> ${msg}`;
            consoleBox.appendChild(p);
            consoleBox.scrollTop = consoleBox.scrollHeight;
        }

        async function startBuild() {
            const file = fileInput.files[0];
            const name = document.getElementById('appName').value;

            if(!file || !name) {
                alert("Kenzie, lengkapi data dulu!");
                return;
            }

            document.getElementById('upload-section').classList.add('hidden');
            document.getElementById('progress-section').classList.remove('hidden');

            const logs = [
                {p: 20, m: "Processing Assets...", s: "Bundling " + file.name},
                {p: 50, m: "Building Package...", s: "Compiling Android Manifest..."},
                {p: 80, m: "Signing...", s: "Injecting Kenzie-Auth Signature..."},
                {p: 100, m: "Finished!", s: "APK ready!"}
            ];

            for (const step of logs) {
                await new Promise(r => setTimeout(r, 1200));
                document.getElementById('progress-bar').style.width = step.p + "%";
                document.getElementById('percent-text').innerText = step.p + "%";
                document.getElementById('status-text').innerText = step.m;
                addLog(step.s);

                if(step.p === 100) {
                    // FITUR DOWNLOAD: Membuat Blob APK palsu agar bisa diunduh
                    const dummyContent = new Uint8Array([0x50, 0x4B, 0x03, 0x04]); // Header ZIP/APK sederhana
                    const blob = new Blob([dummyContent], { type: 'application/vnd.android.package-archive' });
                    const url = URL.createObjectURL(blob);
                    
                    downloadLink.href = url;
                    downloadLink.download = `${name.replace(/\s+/g, '_')}.apk`;

                    setTimeout(() => {
                        document.getElementById('progress-section').classList.add('hidden');
                        document.getElementById('result-section').classList.remove('hidden');
                    }, 800);
                }
            }
        }
    </script>
</body>
</html>
